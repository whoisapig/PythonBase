## IO编程

### 文件读写

> 读写文件是最常见的IO操作。Python内置了读写文件的函数，用法和C是兼容的

读写文件前，我们必须了解一下，在磁盘上读写文件的功能都是由操作系统提供的，现代操作系统不允许普通的程序直接操作磁盘
所以，读写文件就是请求操作系统打开一个文件对象（通常成为文件描述符），然后通过操作系统提供的接口来读写数据到这个对象

#### 读文件

要以读文件得模式打开一个文件对象，使用Python内置得open()函数，传入文件名和标示符：

```python
f = open('/home/www/test.txt', 'r')
```
r表示读权限；

如果文件不存在，**open()** 函数就会抛出一个IOError的错误，并且给出错误码和详细的信息告诉你文件不存在；

如果文件打开成功，接下来，调用 **read()** 方法可以一次读取文件的全部内容；

Python把内容读取到内存中，用要给str对象表示：

最后一步是要调用 **close()** 方法关闭文件，文件使用完毕后必须关闭。因为文件对象会占用操作系统的资源；

操作系统同一时间能开的文件数量也是有限的

由于IO操作可能产生IOError,一旦出错，后面的关闭流就会被中断；所以为了保证文件无论什么情况都能被关闭，所以可以使用try...finally


#### 写文件

写文件和读文件是一样的，唯一区别是调用 **open()** 函数时，传入标识符 **'w'** 或者 **'wb'** 表示写文本文件或者二进制文件：

可以反复调用 **write()** 来写入文件，但是务必要在结束前调用 **close()** 来关闭文件

注意:调用 **write()** 方法操作系统不会立马将数据写入磁盘，它会先将数据缓存在内存，在空余时间才会将内存数据刷入磁盘；但是 **close()** 后，数据会写入完成



### StringIO 和 BytesIO

#### StringIO

StringIO是在内存中读写str

要把str写入StringIO，我们要先创建一个StringIO,然后，像文件一样写入即可：

```python
from io import StringIO
f = StringIO()
f.write("Hello")
f.write(" ")
f.write("World")
print(f.getvalue())
```
**getvalue()** 方法用于获取写入后的str


#### BytesIO 

StringIO操作只能是str，如果要操作二进制数据。就需要使用BytesIO

BytesIO 实现了在内存中读写bytes；


### 操作文件和目录


